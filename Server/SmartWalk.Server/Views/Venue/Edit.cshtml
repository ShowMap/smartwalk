@using SmartWalk.Server.Records
@using SmartWalk.Server.ViewModels

@{
    //Style.Require("SmartWalk.Host");
    
    Script.Require("jQueryUI").AtHead();
    Script.Require("SmartWalk.ViewModels").AtHead();
    
    var venue = (EntityVm) Model;
    var cancelAction = venue.Id == 0 ? Url.Action("List") : Url.Action("View", new { entityId = @venue.Id });
}

@Html.Partial("EditTemplate", venue)

<script>
    $(function () {
        $("#edit-venue-form").bind('OnVenueCancelled', function (event) {
            window.location.href = "@cancelAction";
        });

        $("#edit-venue-form").bind('OnVenueSaved', function (event) {
            window.location.href = "@Url.Action("View", new { entityId = @venue.Id })";
        });
    });
</script>