function addValidationCoreToCustomBinding(n){if(ko.bindingHandlers[n]){var t=ko.bindingHandlers[n].init;ko.bindingHandlers[n].init=function(n,i,r,u,f){return t(n,i,r,u,f),ko.bindingHandlers.validationCore.init(n,i,r,u,f)}}}function VmItemsManager(n,t,i){var r=this;r._allItems=n;r._previousItemData=new Hashtable;r._editingItems=new HashSet;r._initItem=function(n){n.isEditing=ko.observable(!1);i.initItem&&i.initItem(n)};r._allItems()&&r._allItems().forEach(function(n){r._initItem(n)});r._allItems.subscribe(function(n){n&&n.forEach(function(n){n.isEditing===undefined&&r._initItem(n)})});r.items=i.filterItem?ko.computed(function(){return r._allItems()?$.grep(r._allItems(),i.filterItem):undefined}):n;r.getItemView=function(n){return n.isEditing()?i.itemEditView:i.itemView};r.addItem=function(){var n=t();r._allItems()||r._allItems([]);r._allItems.push(n);r._editItem(n,!1)};r._editItem=function(n,t){r._allItems.indexOf(n)<0||r._editingItems.contains(n)||(r.cancelAll(),i.beforeEdit&&i.beforeEdit(n),r._editingItems.add(n),t&&r._previousItemData.put(n,n.toJSON()),n.isEditing(!0))};r.editItem=function(n){r._editItem(n,!0)};r.deleteItem=function(n){n.isEditing()&&cancelItem(n);r._allItems.destroy(n);i.afterDelete&&i.afterDelete()};r.cancelItem=function(n){r._allItems.indexOf(n)<0||!r._editingItems.contains(n)||(r._previousItemData.containsKey(n)?(n.loadData(r._previousItemData.get(n)),r._previousItemData.remove(n)):r._allItems.remove(n),r._editingItems.remove(n),n.errors&&n.errors.showAllMessages(!1),n.isEditing(!1))};r.cancelAll=function(){r._editingItems.values().forEach(function(n){r.cancelItem(n)})};r.saveItem=function(n){return r._allItems.indexOf(n)<0||!r._editingItems.contains(n)?!1:(i.beforeSave&&i.beforeSave(n),n.isValidating&&n.isValidating())?(setTimeout(function(){r.saveItem(n)},50),!1):n.errors&&n.errors().length!=0?(n.errors.showAllMessages(),!1):(r._previousItemData.remove(n),r._editingItems.remove(n),i.afterSave&&i.afterSave(n),n.isEditing(!1),!0)}}function FileUploadManager(n){var t=this;t._pictureData=null;t._picturePreview=ko.observable();t.picturePreview=ko.computed(function(){return t._picturePreview()||n.model.picture()});n.model.picture.subscribe(function(){t._picturePreview(undefined)});t.pictureProgress=ko.observable();t.isBusyUploading=ko.observable(!1);t.request=$.Deferred().resolve();t.onPictureAdded=function(n,i){t._picturePreview(undefined);i.files&&i.files[0]?(t._pictureData=i,t.savePicture()):t._pictureData=null};t.onUploadPictureProgress=function(n,i){var r=parseInt(i.loaded/i.total*100,10);t.pictureProgress(r+"%")};t.deletePicture=function(){n.model.picture(undefined);t._pictureData=null;t._picturePreview(undefined);t.request&&t.request.abort&&t.request.abort()};t.savePicture=function(){return t._pictureData&&(t.pictureProgress(null),t.isBusyUploading(!0),t.request=t._pictureData.submit().done(function(i){n.model.picture(i.fileName);t._pictureData=null;t._picturePreview(i.url)}).fail(function(t){n.handleServerError(t)}).always(function(){t.isBusyUploading(!1);t.request=$.Deferred().resolve()})),t.request}}ko.validation.rules.dependencies={validator:function(n,t){return t?(ko.utils.arrayForEach(t,function(n){n.isValid&&n.notifySubscribers()}),!0):!0},message:"error.depencies"};ko.validation.rules.contactValidation={validator:function(n,t){var i,r,u;if(t.allowEmpty&&!n)return!0;switch(t.contactType()){case 0:return this.message=t.messages.contactEmailValidationMessage,i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i.test(n);case 1:return this.message=t.messages.contactWebValidationMessage,r=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|(www\\.)?){1}([0-9A-Za-z-\\.@:%_‌​+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?"),r.test(n);case 2:return this.message=t.messages.contactPhoneValidationMessage,u=new RegExp("^[s()+-]*([0-9][s()+-]*){6,20}$"),u.test(n);default:return!1}}};ko.validation.rules.dateCompareValidation={validator:function(n,t){var i=t.compareVal(),r;return t.allowEmpty&&!n?!0:t.cmp=="GREATER_THAN"?i?i<=n:!0:t.cmp=="LESS_THAN"?i?n<=i:!0:t.cmp=="REGION"?(r=t.compareValTo(),(i?i<=n:!0)&&(r?n<=r:!0)):!1}};ko.validation.rules.urlValidation={validator:function(n,t){if(t.allowEmpty&&!n)return!0;var i=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|(www\\.)?){1}([0-9A-Za-z-\\.@:%_‌​+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?");return i.test(n)}};ko.validation.rules.asyncValidation={async:!0,validator:function(n,t,i){var r=t.model||t.modelHandler();r&&(r[t.propName]=n,sw.ajaxJsonRequest({propName:t.propName,model:r},t.validationUrl).done(function(){i(!0)}).fail(function(n){if(n.responseJSON&&n.responseJSON.ValidationErrors&&n.responseJSON.ValidationErrors.length>0){var t=$.map(n.responseJSON.ValidationErrors,function(n){return n.Error}).join(" ");i({isValid:!1,message:t})}i({isValid:!1})}))}};ko.validation.registerExtenders();ko.validation.init({errorElementClass:"has-error",errorMessageClass:"help-block",decorateElement:!0,messageOnModified:!0});ko.bindingHandlers.validationTag={init:function(){}};addValidationCoreToCustomBinding("validationTag");addValidationCoreToCustomBinding("datepicker");addValidationCoreToCustomBinding("timepicker");sw.initFileUpload=function(n,t,i,r){$(n).fileupload({url:t,dataType:"json",autoUpload:!1,maxNumberOfFiles:1,dropZone:r,add:i.uploadManager.onPictureAdded,start:function(){$("#progress").toggle(!0)},stop:function(){$("#progress").toggle(!1)},progressall:i.uploadManager.onUploadPictureProgress});var u=function(t){t?$(n).fileupload("disable"):$(n).fileupload("enable");$(n).fileupload("option","fileInput").attr("disabled",t)};i.isBusy.subscribe(u);i.uploadManager.isBusyUploading.subscribe(u)};sw.widgets={};$.widget("ui.autocomplete",$.ui.autocomplete,{options:{create:function(n){$(n.currentTarget).find(".ui-menu-item a").removeClass("ui-corner-all")}},_renderMenu:function(n,t){var i=this;$.each(t,function(t,r){i._renderItemData(n,r)});$(n).addClass("dropdown-menu").removeClass("ui-menu ui-widget ui-widget-content ui-corner-all")}});$.widget("ui.dialog",$.ui.dialog,{options:{dialogClass:"panel panel-default",show:{effect:"fade",duration:250},hide:{effect:"fade",duration:100},create:function(n){var t=$(n.target.parentElement),i=t.find(".ui-dialog-title");i.replaceWith($("<h3><\/h3>").attr("id",i.attr("id")).addClass("panel-title").text(i.text()));t.find(".ui-dialog-titlebar").removeClass("ui-widget-header ui-corner-all").addClass("panel-heading");t.find(".ui-dialog-content").removeClass("ui-widget-content").addClass("panel-body");t.find(".ui-dialog-titlebar-close").addClass("btn btn-default").append($("<span><\/span>").addClass("glyphicon glyphicon-remove"));t.find(".ui-dialog-buttonpane").removeClass("ui-widget-content").addClass("panel-footer");t.removeClass("ui-widget-content ui-corner-all")},open:function(){$("body").addClass("stop-scrolling")},beforeClose:function(){$("body").removeClass("stop-scrolling")}}});
/*
//# sourceMappingURL=sw-editing.min.js.map
*/