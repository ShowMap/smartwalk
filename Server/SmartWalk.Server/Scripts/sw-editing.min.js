function addValidationCoreToCustomBinding(n){if(ko.bindingHandlers[n]){var t=ko.bindingHandlers[n].init;ko.bindingHandlers[n].init=function(n,i,r,u,f){return t(n,i,r,u,f),ko.bindingHandlers.validationCore.init(n,i,r,u,f)}}}function VmItemsManager(n,t,i){var r=this;r._previousItemData=ko.observable(null);r._processIsEditingChange=function(n,t){t?n.id()&&n.id()!=0&&r._previousItemData(n.toJSON.apply(n)):(n.id()&&n.id()!=0?r._previousItemData()!=null&&n.loadData.apply(n,[r._previousItemData()]):r._allItems.remove(n),r._previousItemData(null))};r._initItem=function(n){n.isEditing=ko.observable(!1);n.isEditing.subscribe(function(t){r._processIsEditingChange(n,t)});i.initItem&&i.initItem(n)};r._allItems=n;r._allItems()&&r._allItems().forEach(function(n){r._initItem(n)});r._allItems.subscribe(function(n){n&&n.forEach(function(n){n.isEditing===undefined&&r._initItem(n)})});r.items=i.filterItem?ko.computed(function(){return r._allItems()?$.grep(r._allItems(),i.filterItem):undefined}):n;r.setEditingItem=i.setEditingItem||function(n){r._allItems()&&r._allItems().forEach(function(t){t.isEditing(t==n)})};r.getItemView=function(n){return n.isEditing()?i.itemEditView:i.itemView};r.addItem=function(){var n=t();r._allItems()||r._allItems([]);r._allItems.push(n);r.editItem(n)};r.editItem=function(n){r.setEditingItem(n)};r.deleteItem=function(n){n.isEditing()&&cancelItem(n);n.id()&&n.id()>0?r._allItems.destroy(n):r._allItems.remove(n)};r.cancelItem=function(n){r.setEditingItem(null);n.errors&&n.errors.showAllMessages(!1)};r.saveItem=function(n){return(i.beforeSave&&i.beforeSave(n),n.isValidating&&n.isValidating())?(setTimeout(function(){r.saveItem(n)},50),!1):(n.errors&&n.errors().length!=0?n.errors.showAllMessages():(n.id()&&n.id()!=0||n.id(-1),i.afterSave&&i.afterSave(n),r._previousItemData(null),r.setEditingItem(null)),!0)}}ko.validation.rules.dependencies={validator:function(n,t){return t?(ko.utils.arrayForEach(t,function(n){n.isValid&&n.notifySubscribers()}),!0):!0},message:"error.depencies"};ko.validation.rules.contactValidation={validator:function(n,t){var i,r,u;if(t.allowEmpty&&!n)return!0;switch(t.contactType()){case 0:return this.message=t.messages.contactEmailValidationMessage,i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i.test(n);case 1:return this.message=t.messages.contactWebValidationMessage,r=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|(www\\.)?){1}([0-9A-Za-z-\\.@:%_‌​+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?"),r.test(n);case 2:return this.message=t.messages.contactPhoneValidationMessage,u=new RegExp("^[s()+-]*([0-9][s()+-]*){6,20}$"),u.test(n);default:return!1}}};ko.validation.rules.dateCompareValidation={validator:function(n,t){var i=t.compareVal(),r;return t.allowEmpty&&(!n||!i)?!0:t.cmp=="GREATER_THAN"?n>=i:t.cmp=="LESS_THAN"?n<=i:t.cmp=="REGION"?(r=t.compareValTo(),!r)?!0:n<=r&&n>=i:!1}};ko.validation.rules.urlValidation={validator:function(n,t){if(t.allowEmpty&&!n)return!0;var i=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|(www\\.)?){1}([0-9A-Za-z-\\.@:%_‌​+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?");return i.test(n)}};ko.validation.rules.asyncValidation={async:!0,validator:function(n,t,i){var r=t.model||t.modelHandler();r&&(r[t.propName]=n,sw.ajaxJsonRequest({propName:t.propName,model:r},t.validationUrl,function(){i(!0)},function(n){if(n.responseJSON&&n.responseJSON.ValidationErrors&&n.responseJSON.ValidationErrors.length>0){var t=$.map(n.responseJSON.ValidationErrors,function(n){return n.Error}).join(" ");i({isValid:!1,message:t})}i({isValid:!1})}))}};ko.validation.registerExtenders();ko.validation.init({errorElementClass:"has-error",errorMessageClass:"help-block",decorateElement:!0,messageOnModified:!0});ko.bindingHandlers.validationTag={init:function(){}};addValidationCoreToCustomBinding("validationTag");addValidationCoreToCustomBinding("datepicker");addValidationCoreToCustomBinding("timepicker");sw.widgets={};$.widget("ui.autocomplete",$.ui.autocomplete,{options:{create:function(n){$(n.currentTarget).find(".ui-menu-item a").removeClass("ui-corner-all")}},_renderMenu:function(n,t){var i=this;$.each(t,function(t,r){i._renderItemData(n,r)});$(n).addClass("dropdown-menu").removeClass("ui-menu ui-widget ui-widget-content ui-corner-all")}});$.widget("ui.dialog",$.ui.dialog,{options:{dialogClass:"panel panel-default",show:{effect:"fade",duration:250},hide:{effect:"fade",duration:100},create:function(n){var t=$(n.target.parentElement),i=t.find(".ui-dialog-title");i.replaceWith($("<h3><\/h3>").attr("id",i.attr("id")).addClass("panel-title").text(i.text()));t.find(".ui-dialog-titlebar").removeClass("ui-widget-header ui-corner-all").addClass("panel-heading");t.find(".ui-dialog-content").removeClass("ui-widget-content").addClass("panel-body");t.find(".ui-dialog-titlebar-close").addClass("btn btn-default").append($("<span><\/span>").addClass("glyphicon glyphicon-remove"));t.find(".ui-dialog-buttonpane").removeClass("ui-widget-content").addClass("panel-footer");t.removeClass("ui-widget-content ui-corner-all")},open:function(){$("body").addClass("stop-scrolling")},beforeClose:function(){$("body").removeClass("stop-scrolling")}}});
/*
//# sourceMappingURL=sw-editing.min.js.map
*/