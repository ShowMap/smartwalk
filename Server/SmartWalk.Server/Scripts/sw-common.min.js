function ContactViewModel(n){var t=this;t.id=ko.observable();t.type=ko.observable();t.title=ko.observable();t.contact=ko.observable();t.loadData=function(n){t.id(n.Id);t.type(n.Type);t.title(n.Title);t.contact(n.Contact)};t.loadData(n);t.toJSON=function(){return{Id:t.id(),Type:t.type(),Title:t.title(),Contact:t.contact(),Destroy:t._destroy}}}function AddressViewModel(n){var t=this;t.id=ko.observable();t.address=ko.observable();t.tip=ko.observable();t.latitude=ko.observable();t.longitude=ko.observable();t.loadData=function(n){t.id(n.Id);t.address(n.Address);t.tip(n.Tip);t.latitude(n.Latitude);t.longitude(n.Longitude)};t.loadData(n);t.toJSON=function(){return{Id:t.id(),Address:t.address(),Tip:t.tip(),Latitude:t.latitude(),Longitude:t.longitude(),Destroy:t._destroy}}}function EventViewModel(n){var t=this;t.id=ko.observable();t.title=ko.observable();t.startDate=ko.observable();t.endDate=ko.observable();t.status=ko.observable();t.picture=ko.observable();t.combineType=ko.observable(n.combineType);t.description=ko.observable(n.description);t.host=ko.observable();t.venues=ko.observableArray();t.loadData=function(n){t.id(n.Id);t.title(n.Title);t.startDate(n.StartDate?sw.convertToLocal(moment(n.StartDate).toDate()):undefined);t.endDate(n.EndDate?sw.convertToLocal(moment(n.EndDate).toDate()):undefined);t.status(n.Status);t.picture(n.Picture);t.combineType(n.CombineType);t.description(n.Description);t.host(n.Host?new EntityViewModel(n.Host):undefined);t.venues(n.Venues?$.map(n.Venues,function(n){return new EntityViewModel(n)}):undefined)};t.toJSON=function(){return{Id:t.id(),CombineType:t.combineType(),Title:t.title(),StartDate:t.startDate()?sw.convertToUTC(t.startDate()).toJSON():undefined,EndDate:t.endDate()?sw.convertToUTC(t.endDate()).toJSON():undefined,Status:t.status(),Picture:t.picture(),Description:t.description(),Host:t.host()?t.host().toJSON():undefined,Venues:t.venues()?$.map(t.venues(),function(n){return n.toJSON()}):undefined,Destroy:t._destroy}};t.loadData(n)}function EntityViewModel(n){var t=this;t.id=ko.observable();t.type=ko.observable();t.name=ko.observable();t.abbreviation=ko.observable();t.picture=ko.observable();t.description=ko.observable();t.contacts=ko.observableArray();t.addresses=ko.observableArray();t.shows=ko.observableArray();t.loadData=function(n){t.id(n.Id);t.type(n.Type);t.name(n.Name);t.abbreviation(n.Abbreviation);t.picture(n.Picture);t.description(n.Description);t.contacts(n.Contacts?$.map(n.Contacts,function(n){return new ContactViewModel(n)}):undefined);t.addresses(n.Addresses?$.map(n.Addresses,function(n){return new AddressViewModel(n)}):undefined);t.shows(n.Shows?$.map(n.Shows,function(n){return new ShowViewModel(n)}):undefined)};t.toJSON=function(){return{Id:t.id(),Type:t.type(),Name:t.name(),Abbreviation:t.abbreviation(),Picture:t.picture(),Description:t.description(),Contacts:t.contacts()?$.map(t.contacts(),function(n){return n.toJSON()}):undefined,Addresses:t.addresses()?$.map(t.addresses(),function(n){return n.toJSON()}):undefined,Shows:t.shows()?$.map(t.shows(),function(n){return n.toJSON()}):undefined,Destroy:t._destroy}};t.loadData(n)}function ShowViewModel(n){var t=this;t.id=ko.observable();t.title=ko.observable();t.description=ko.observable();t.startTime=ko.observable();t.endTime=ko.observable();t.picture=ko.observable();t.detailsUrl=ko.observable();t.loadData=function(n){t.id(n.Id);t.title(n.Title);t.description(n.Description);t.startTime(n.StartTime?sw.convertToLocal(moment(n.StartTime).toDate()):undefined);t.endTime(n.EndTime?sw.convertToLocal(moment(n.EndTime).toDate()):undefined);t.picture(n.Picture);t.detailsUrl(n.DetailsUrl)};t.toJSON=function(){return{Id:t.id(),Title:t.title(),Description:t.description(),StartTime:t.startTime()?sw.convertToUTC(t.startTime()).toJSON():undefined,EndTime:t.endTime()?sw.convertToUTC(t.endTime()).toJSON():undefined,Picture:t.picture(),DetailsUrl:t.detailsUrl(),Destroy:t._destroy}};t.loadData(n)}String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});sw={};sw.inherits=function(n,t){var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n;n.superClass_=t.prototype};sw.attachVerticalScroll=function(n){$(window).scroll(function(t){t.preventDefault();$(window).scrollTop()>=$(document).height()-$(window).height()&&n()})};sw.ajaxJsonRequest=function(n,t,i,r,u){var f=this,e={async:!0,url:t,type:"POST",data:JSON.stringify(n),dataType:"json",cache:!1,contentType:"application/json; charset=utf-8"};return u&&u.isBusy&&u.isBusy(!0),$.ajax(e).done(function(n,t,r){i&&i.call(f,n,t,r)}).fail(function(n,t,i){r&&r.call(f,n,t,i)}).always(function(){u&&u.isBusy&&u.isBusy(!1)})};sw.convertToLocal=function(n){return n?new Date(n.getTime()+n.getTimezoneOffset()*6e4):n};sw.convertToUTC=function(n){return n?new Date(n.getTime()-n.getTimezoneOffset()*6e4):n};sw.scaleImages=function(n){$(n).find("img.scale").imageScale()};sw.setCSSRule=function(n,t,i){for(var r,o,e=0;e<document.styleSheets.length;e++){var u=document.styleSheets[e],f=u.cssRules||u.rules,s=n.toLowerCase();for(r=0,o=f.length;r<o;r++)if(f[r].selectorText&&f[r].selectorText.toLowerCase()==s){if(i!=null){f[r].style[t]=i;return}u.deleteRule?u.deleteRule(r):u.removeRule?u.removeRule(r):f[r].style.cssText=""}}};sw.fitThumbs=function(n,t,i){var r=$(n).width(),u;$(n).data("sw.previousWidth")!=r&&($(n).data("sw.previousWidth",r),u=Math.max(Math.round(r/i),1),sw.setCSSRule(t,"width",r/u+"px"))};ko.bindingHandlers.fadeIn={init:function(n,t){var i=ko.utils.unwrapObservable(t());$(n).hide().fadeIn(i)}};ko.bindingHandlers.fadeVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i)||!1)},update:function(n,t){var i=t();ko.unwrap(i)?$(n).fadeIn():$(n).fadeOut()}};ko.bindingHandlers.fadeInVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i)||!1)},update:function(n,t){var i=t();ko.unwrap(i)?$(n).fadeIn():$(n).fadeOut(0)}};ko.bindingHandlers.fadeScrollVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i)||!1)},update:function(n,t){var i=t();ko.unwrap(i)?($(n).fadeIn(),ko.bindingHandlers.scroll.scrollTop(n,"slow")):$(n).fadeOut()}};ko.bindingHandlers.scroll={init:function(n,t){var i=ko.utils.unwrapObservable(t());ko.bindingHandlers.scroll.scrollTop(n,i)}};ko.bindingHandlers.scroll.scrollTop=function(n,t){var r=80,i=$(n).closest(".ui-dialog-content");i.length>0?i.animate({scrollTop:$(n).offset().top-$(i).offset().top+$(i).scrollTop()-r},t):$(n).visible(!1,!1,"vertical")||$("html, body").animate({scrollTop:$(n).offset().top-r},t)};sw.vm={};ViewModelBase=function(){var n=this;n.currentRequest=null;n.isBusy=ko.observable(!1).extend({throttle:1});n.isEnabled=ko.computed(function(){return!n.isBusy()});n.isBusy.subscribe(function(t){!t&&n.currentRequest&&(n.currentRequest.abort(),n.currentRequest=undefined)});n.serverValidErrors=ko.observableArray();n.serverError=ko.observable();n.handleServerError=function(t){n.serverValidErrors(t.responseJSON?t.responseJSON.ValidationErrors:undefined);t.responseJSON||(t.statusText?t.statusText.toLowerCase()!="abort"&&n.serverError(t.statusText):n.serverError("There was an error. Please try again."))};n.resetServerErrors=function(){n.serverValidErrors(undefined);n.serverError(undefined)}};ListViewModel=function(n,t){var i=this;ListViewModel.superClass_.constructor.call(i);i._currentPage=0;i._finished=!1;i.query=ko.observable().extend({throttle:300});i.items=ko.observableArray();i.addItem=function(){};i.getData=function(r){i._finished||i.isBusy()||i._currentPage==r||sw.ajaxJsonRequest({pageNumber:r,query:i.query(),parameters:n},t,function(n){n&&n.length>0?(i._currentPage=i._currentPage+1,n.forEach(function(n){i.addItem(n)})):i._finished=!0},function(n){i.handleServerError(n)},i)};i.getNextPage=function(){return i.getData(i._currentPage+1)};i.searchedQuery=ko.observable(null);i.isBusy.subscribe(function(n){!n&&i.query()&&i.searchedQuery(i.query())});i.query.subscribe(function(){i.searchedQuery(null);i.items.removeAll();i._finished=!1;i._currentPage=-1;i.getNextPage()})};sw.inherits(ListViewModel,ViewModelBase);sw.vm.ContactType={Email:0,Url:1,Phone:2};sw.vm.EventStatus={Private:0,Public:1,Unlisted:2};sw.vm.EntityType={Host:0,Venue:1};sw.ext={};sw.ext.displayName=function(n){return n.title()||(n.host()!=null?n.host().name():null)};sw.ext.displayPicture=function(n){return n.picture()||(n.host()!=null?n.host().picture():null)};sw.ext.displayDate=function(n){return(n.startDate()?moment(n.startDate()).format("LL"):"")+(n.endDate()?" - "+moment(n.endDate()).format("LL"):"")};sw.ext.displayTime=function(n,t){var i=(n.startTime()?moment(n.startTime()).format("LT"):"")+(n.endTime()?" - "+moment(n.endTime()).format("LT"):"");return i==""&&(i=t),i};
/*
//# sourceMappingURL=sw-common.min.js.map
*/