function ContactViewModel(n){var t=this;t.id=ko.observable();t.type=ko.observable();t.title=ko.observable();t.contact=ko.observable();t.loadData(n)}function AddressViewModel(n){var t=this;t.id=ko.observable();t.address=ko.observable();t.tip=ko.observable();t.latitude=ko.observable();t.longitude=ko.observable();t.loadData(n)}function EventViewModel(n){var t=this;t.id=ko.observable();t.title=ko.observable();t.startDate=ko.observable();t.endDate=ko.observable();t.status=ko.observable();t.picture=ko.observable();t.combineType=ko.observable(n.combineType);t.description=ko.observable(n.description);t.host=ko.observable();t.venues=ko.observableArray();t.loadData(n)}function EntityViewModel(n){var t=this;t.id=ko.observable();t.type=ko.observable();t.name=ko.observable();t.abbreviation=ko.observable();t.picture=ko.observable();t.description=ko.observable();t.contacts=ko.observableArray();t.addresses=ko.observableArray();t.shows=ko.observableArray();t.loadData(n)}function ShowViewModel(n){var t=this;t.id=ko.observable();t.title=ko.observable();t.description=ko.observable();t.startTime=ko.observable();t.endTime=ko.observable();t.picture=ko.observable();t.detailsUrl=ko.observable();t.loadData(n)}String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});typeof sw=="undefined"&&(sw={});sw.inherits=function(n,t){var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n;n.superClass_=t.prototype};sw.attachVerticalScroll=function(n){$(window).scroll(function(t){t.preventDefault();$(window).scrollTop()>=$(document).height()-$(window).height()&&n()})};sw.ajaxJsonRequest=function(n,t,i,r,u){var f=this,e={async:!0,url:t,type:"POST",data:JSON.stringify(n),dataType:"json",cache:!1,contentType:"application/json; charset=utf-8"};return u&&u.isBusy&&u.isBusy(!0),$.ajax(e).done(function(n,t,r){i&&i.call(f,n,t,r)}).fail(function(n,t,i){r&&r.call(f,n,t,i)}).always(function(){u&&u.isBusy&&u.isBusy(!1)})};sw.convertToLocal=function(n){return n?new Date(n.getTime()+n.getTimezoneOffset()*6e4):n};sw.convertToUTC=function(n){return n?new Date(n.getTime()-n.getTimezoneOffset()*6e4):n};sw.scaleImages=function(n){$(n).find("img.scale").imageScale()};ko.bindingHandlers.fadeIn={init:function(n,t){var i=ko.utils.unwrapObservable(t());$(n).hide().fadeIn(i)}};ko.bindingHandlers.fadeVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i)||!1)},update:function(n,t){var i=t();ko.unwrap(i)?$(n).fadeIn():$(n).fadeOut()}};ko.bindingHandlers.fadeInVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i)||!1)},update:function(n,t){var i=t();ko.unwrap(i)?$(n).fadeIn():$(n).fadeOut(0)}};ko.bindingHandlers.fadeScrollVisible={init:function(n,t){var i=t();$(n).toggle(ko.unwrap(i)||!1)},update:function(n,t){var i=t();ko.unwrap(i)?($(n).fadeIn(),ko.bindingHandlers.scroll.scrollTop(n,"slow")):$(n).fadeOut()}};ko.bindingHandlers.scroll={init:function(n,t){var i=ko.utils.unwrapObservable(t());ko.bindingHandlers.scroll.scrollTop(n,i)}};ko.bindingHandlers.scroll.scrollTop=function(n,t){var r=80,i=$(n).closest(".ui-dialog-content");i.length>0?i.animate({scrollTop:$(n).offset().top-$(i).offset().top+$(i).scrollTop()-r},t):$(n).visible(!1,!1,"vertical")||$("html, body").animate({scrollTop:$(n).offset().top-r},t)};sw.vm={};ViewModelBase=function(){var n=this;n.currentRequest=null;n.isBusy=ko.observable(!1).extend({throttle:1});n.isEnabled=ko.computed(function(){return!n.isBusy()});n.isBusy.subscribe(function(t){!t&&n.currentRequest&&(n.currentRequest.abort(),n.currentRequest=undefined)});n.serverValidErrors=ko.observableArray();n.serverError=ko.observable();n.handleServerError=function(t){n.serverValidErrors(t.responseJSON?t.responseJSON.ValidationErrors:undefined);t.responseJSON||(t.statusText?t.statusText.toLowerCase()!="abort"&&n.serverError(t.statusText):n.serverError("There was an error. Please try again."))};n.resetServerErrors=function(){n.serverValidErrors(undefined);n.serverError(undefined)}};ListViewModel=function(n,t){var i=this;ListViewModel.superClass_.constructor.call(i);i._currentPage=0;i._finished=!1;i.query=ko.observable().extend({throttle:300});i.items=ko.observableArray();i.addItem=function(){};i.getData=function(r){i._finished||i.isBusy()||i._currentPage==r||sw.ajaxJsonRequest({pageNumber:r,query:i.query(),parameters:n},t,function(n){n&&n.length>0?(i._currentPage=i._currentPage+1,n.forEach(function(n){i.addItem(n)})):i._finished=!0},function(n){i.handleServerError(n)},i)};i.getNextPage=function(){return i.getData(i._currentPage+1)};i.searchedQuery=ko.observable(null);i.isBusy.subscribe(function(n){!n&&i.query()&&i.searchedQuery(i.query())});i.query.subscribe(function(){i.searchedQuery(null);i.items.removeAll();i._finished=!1;i._currentPage=-1;i.getNextPage()})};sw.inherits(ListViewModel,ViewModelBase);sw.vm.ContactType={Email:0,Url:1,Phone:2};ContactViewModel.prototype.loadData=function(n){this.id(n.Id);this.type(n.Type);this.title(n.Title);this.contact(n.Contact)};ContactViewModel.prototype.toJSON=function(){return{Id:this.id(),Type:this.type(),Title:this.title(),Contact:this.contact(),Destroy:this._destroy}};AddressViewModel.prototype.loadData=function(n){this.id(n.Id);this.address(n.Address);this.tip(n.Tip);this.latitude(n.Latitude);this.longitude(n.Longitude)};AddressViewModel.prototype.toJSON=function(){return{Id:this.id(),Address:this.address(),Tip:this.tip(),Latitude:this.latitude(),Longitude:this.longitude(),Destroy:this._destroy}};EventViewModel.prototype.loadData=function(n){this.id(n.Id);this.title(n.Title);this.startDate(n.StartDate?sw.convertToLocal(moment(n.StartDate).toDate()):undefined);this.endDate(n.EndDate?sw.convertToLocal(moment(n.EndDate).toDate()):undefined);this.status(n.Status);this.picture(n.Picture);this.combineType(n.CombineType);this.description(n.Description);this.host(n.Host?new EntityViewModel(n.Host):undefined);this.venues(n.Venues?$.map(n.Venues,function(n){return new EntityViewModel(n)}):undefined)};EventViewModel.prototype.toJSON=function(){return{Id:this.id(),CombineType:this.combineType(),Title:this.title(),StartDate:this.startDate()?sw.convertToUTC(this.startDate()).toJSON():undefined,EndDate:this.endDate()?sw.convertToUTC(this.endDate()).toJSON():undefined,Status:this.status(),Picture:this.picture(),Description:this.description(),Host:this.host()?this.host().toJSON.apply(this.host()):undefined,Venues:this.venues()?$.map(this.venues(),function(n){return n.toJSON.apply(n)}):undefined,Destroy:this._destroy}};sw.vm.EventStatus={Private:0,Public:1,Unlisted:2};sw.vm.EntityType={Host:0,Venue:1};EntityViewModel.prototype.loadData=function(n){this.id(n.Id);this.type(n.Type);this.name(n.Name);this.abbreviation(n.Abbreviation);this.picture(n.Picture);this.description(n.Description);this.contacts(n.Contacts?$.map(n.Contacts,function(n){return new ContactViewModel(n)}):undefined);this.addresses(n.Addresses?$.map(n.Addresses,function(n){return new AddressViewModel(n)}):undefined);this.shows(n.Shows?$.map(n.Shows,function(n){return new ShowViewModel(n)}):undefined)};EntityViewModel.prototype.toJSON=function(){return{Id:this.id(),Type:this.type(),Name:this.name(),Abbreviation:this.abbreviation(),Picture:this.picture(),Description:this.description(),Contacts:this.contacts()?$.map(this.contacts(),function(n){return n.toJSON.apply(n)}):undefined,Addresses:this.addresses()?$.map(this.addresses(),function(n){return n.toJSON.apply(n)}):undefined,Shows:this.shows()?$.map(this.shows(),function(n){return n.toJSON.apply(n)}):undefined,Destroy:this._destroy}};ShowViewModel.prototype.loadData=function(n){this.id(n.Id);this.title(n.Title);this.description(n.Description);this.startTime(n.StartTime?sw.convertToLocal(moment(n.StartTime).toDate()):undefined);this.endTime(n.EndTime?sw.convertToLocal(moment(n.EndTime).toDate()):undefined);this.picture(n.Picture);this.detailsUrl(n.DetailsUrl)};ShowViewModel.prototype.toJSON=function(){return{Id:this.id(),Title:this.title(),Description:this.description(),StartTime:this.startTime()?sw.convertToUTC(this.startTime()).toJSON():undefined,EndTime:this.endTime()?sw.convertToUTC(this.endTime()).toJSON():undefined,Picture:this.picture(),DetailsUrl:this.detailsUrl(),Destroy:this._destroy}};sw.ext={};sw.ext.displayName=function(n){return n.title()||(n.host()!=null?n.host().name():null)};sw.ext.displayPicture=function(n){return n.picture()||(n.host()!=null?n.host().picture():null)};sw.ext.displayDate=function(n){return(n.startDate()?moment(n.startDate()).format("LL"):"")+(n.endDate()?" - "+moment(n.endDate()).format("LL"):"")};sw.ext.displayTime=function(n,t){var i=(n.startTime()?moment(n.startTime()).format("LT"):"")+(n.endTime()?" - "+moment(n.endTime()).format("LT"):"");return i==""&&(i=t),i};
/*
//# sourceMappingURL=sw-common.min.js.map
*/